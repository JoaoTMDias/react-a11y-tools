import { createHistory, Link, LocationProvider, Router } from "@reach/router";
import { ArgsTable, Canvas, Meta, Story, Subtitle } from "@storybook/addon-docs/blocks";
import { RouteAnnouncer } from "../src/components/announcer/route-announcer";

<Meta title="Components/Announcer" component={RouteAnnouncer} />

<style>{`
	.page {
		width: 100%;
		display: flex;
		flex-direction: column;
		justify-content: flex-start;
		font-family: sans-serif;
		background: black;
		color: white;
		padding: 2rem;
	}

	.inner {
		padding: 2rem 0;
	}

	a {
		color: white;
		text-decoration: none;
	}

	.nav {
		display: flex;
		flex-direction: row;
		gap: 1rem;
	}

	a[aria-current="page"] {
		text-decoration: underline;
	}

	.footer {
		width: 100%;
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		justify-content: space-around;
		gap: 2rem;
	}

	.footer__list {
		margin: 0;
		padding: 0;
		list-style-type: none;
		display: grid;
		grid-gap: 1rem;
	}

	.footer__link {
		border-bottom: 1px solid #fff;
	}
`}</style>

export let history = createHistory(window);

export const Home = () => (
	<div className="page inner">
		<h1>Welcome</h1>
		<p>You are on the welcome page</p>
	</div>
);

export const Dashboard = () => (
	<div className="page inner">
		<h1>Dashboard</h1>
		<p>You are on the dashboard page</p>
	</div>
);

export const Invoice = (props) => (
	<div className="page inner">
		<h1>Invoice {props.invoiceId}</h1>
		<p>You are on the invoice page</p>
	</div>
);

export const DemoWithRouter = () => {
	return (
		<LocationProvider history={history}>
			{(context) => {
				return (
					<div className="page">
						<RouteAnnouncer pathname={context.location.pathname}>
							<header>
								<nav className="nav">
									<Link to="/">Home</Link>
									<Link to="/dashboard">Dashboard</Link>
									<Link to="/invoices/123">Invoice 123</Link>
									<Link to="/invoices/abc">Invoice ABC</Link>
								</nav>
							</header>
							<main>
								<Router>
									<Home path="/" />
									<Dashboard path="/dashboard" />
									<Invoice path="/invoices/:invoiceId" />
								</Router>
							</main>
							<footer className="footer">
								<div className="footer__column">
									<h5>Features</h5>
									<ul className="footer__list">
										<li>
											<a className="footer__link" href="#">
												Cool stuff
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Random feature
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Team feature
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Stuff for developers
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Another one
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Last time
											</a>
										</li>
									</ul>
								</div>
								<div className="footer__column">
									<h5>Resources</h5>
									<ul className="footer__list">
										<li>
											<a className="footer__link" href="#">
												Resource name
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Resource
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Another resource
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Final resource
											</a>
										</li>
									</ul>
								</div>
								<div className="footer__column">
									<h5>Resources</h5>
									<ul className="footer__list">
										<li>
											<a className="footer__link" href="#">
												Business
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Education
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Government
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Gaming
											</a>
										</li>
									</ul>
								</div>
								<div className="footer__column">
									<h5>About</h5>
									<ul className="footer__list">
										<li>
											<a className="footer__link" href="#">
												Team
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Locations
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Privacy
											</a>
										</li>
										<li>
											<a className="footer__link" href="#">
												Terms
											</a>
										</li>
									</ul>
								</div>
							</footer>
						</RouteAnnouncer>
					</div>
				);
			}}
		</LocationProvider>
	);
};

# Route Announcer

<Subtitle>
	<code>Flex</code> is a flexbox helper component and comes with helpful style shorthand. It renders a div element, but
	can render another type of <code>HTMLElement</code> using the prop <code>as</code>.
</Subtitle>

<Canvas>
	<Story
		name="Route Announcer"
		args={{
			pathname: window.location.pathname,
		}}
	>
		{() => <DemoWithRouter />}
	</Story>
</Canvas>

### Props

<ArgsTable story="Route Announcer" />

## Usage

Using the Flex components, here are some helpful shorthand props:

- `flexDirection` is `direction`.
- `flexWrap` is `wrap`.
- `flexBasis` is `basis`.
- `flexGrow` is `grow`.
- `flexShrink` is `shrink`.
- `alignItems` is `align`.
- `justifyContent` is `justify`.
- `gap` is `gap` (with fallback for older browsers).

While you can write the CSS styles, using this helper can save you some time.
