import { useState } from "react";
import { Meta, Story, Canvas, Preview, ArgsTable, Subtitle } from "@storybook/addon-docs/blocks";
import images from "../test/components/audit/mocks/images";
import { Audit, defaultProps } from "../src/components/audit/index";

<Meta title="Testing/Audit" component={Audit} parameters={{ previewTabs: { canvas: { hidden: true } } }} />

<style>{`
	.layout {
		width: 100%;
		display: flex;
		flex-direction: column;
		justify-content: flex-start;
		align-items: center;
		font-family: sans-serif;
	}

	.images {
		width: 100%;
		display: grid;
		grid-template-columns: repeat(4, 1fr);
		grid-gap: 1rem;
		padding: 1rem 0;
	}

	.images__wrapper,
	.images__wrapper img {
		width: 100%;
		height: auto;
		margin: 0;
		padding: 0;
	}

	.header {
		width: 100%;
		height: 3rem;
		background-color: #fff;
		color: #222;
		border-bottom: 3px solid tomato;
	}

	.header,
	.header__content,
	.header__navigation,
	.hero__button {
		display: flex;
		flex-direction: row;
		align-items: center;
	}

	.header,
	.header__content {
		justify-content: center;
	}

	.header__content {
		gap: 2rem;
	}

	.header__title {
		font-size: clamp(24px, 5vw, 28px);
	}

	.header__navigation {
		position: relative;
		justify-content: space-between;
		gap: 1rem;
	}

	.header__link {
		color: #333;;
	}

	.main {
		padding: 1.5rem;
		background-color: white;
	}

	.hero {
		height: clamp(480px, 50vh, 720px);
		background-color: #fafafa;
		display: grid;
		place-items: center;
	}

	.hero__subheading
	.hero__title {
		display: flex;
		text-align: center;
	}

	.hero__subheading {
		max-width: clamp(44ch, 400px, 70ch);
		font-weight: normal;
	}

	.hero__button {
		text-align: center;
		border: 1px solid #111;
		color: #111;
		background: transparent;
		height: 3rem;
	}
`}</style>

export const AuditInPage = (args) => {
	function renderImages() {
		const list = images.map((image) => {
			const alt = image.author ? `Photo by ${image.author}` : null;
			return (
				<figure className="images__wrapper" key={image.id} id={image.id}>
					<img src={image.download_url} width={image.width} height={image.height} loading="lazy" alt={alt} />
				</figure>
			);
		});
		return <section className="images">{list}</section>;
	}
	return (
		<div className="layout">
			<Audit {...args} />
			<header className="header">
				<div className="header__content">
					<h1 className="header__title">A company</h1>
					<nav className="header__navigation">
						<a className="header__link" href="#tour">
							Tour
						</a>
						<a className="header__link" href="#product">
							Product
						</a>
						<a className="header__link" href="#features">
							Features
						</a>
						<a className="header__link">Enterprise</a>
					</nav>
				</div>
			</header>
			<main className="main">
				<div className="hero">
					<center>
						<h1 className="hero__title">A headline</h1>
						<h4 className="hero__subheading">
							A paragraph that works as a subheading, but uses the wrong heading-level and HTML tag
						</h4>
						<button className="hero__button" type="button" tabIndex={1}>
							Do a thing!
						</button>
					</center>
				</div>
				<section className="checkboxes-section">
					<fieldset>
						<div className="checkbox column">
							<input id="bell" type="checkbox" name="scientist" value="bell" />
							<label htmlFor="bell">Alexander Graham Bell</label>
							<input id="curry" type="checkbox" name="scientist" value="curry" />
							<label htmlFor="curry">Marie Curie</label>
							<input id="lovelace" type="checkbox" name="scientist" value="lovelace" />
							<label htmlFor="lovelace">Ada Lovelace</label>
							<input id="nobel" type="checkbox" name="scientist" value="nobel" />
							<label htmlFor="nobel">Alfred Nobel</label>
							<input id="pasteur" type="checkbox" name="scientist" value="pasteur" />
							<label htmlFor="pasteur">Louis Pasteur</label>
							<input id="tesla" type="checkbox" name="scientist" value="tesla" />
							<label htmlFor="tesla">Nikola Tesla</label>
						</div>
					</fieldset>
				</section>
				<section className="checkboxes-section">
					<fieldset>
						<div className="checkbox column">
							<input id="bell" type="checkbox" name="scientist" value="bell" />
							<label htmlFor="bell">Alexander Graham Bell</label>
							<input id="curry" type="checkbox" name="scientist" value="curry" />
							<label htmlFor="curry">Marie Curie</label>
							<input id="lovelace" type="checkbox" name="scientist" value="lovelace" />
							<label htmlFor="lovelace">Ada Lovelace</label>
							<input id="nobel" type="checkbox" name="scientist" value="nobel" />
							<label htmlFor="nobel">Alfred Nobel</label>
							<input id="pasteur" type="checkbox" name="scientist" value="pasteur" />
							<label htmlFor="pasteur">Louis Pasteur</label>
							<input id="tesla" type="checkbox" name="scientist" value="tesla" />
							<label htmlFor="tesla">Nikola Tesla</label>
						</div>
						<legend>Another legend</legend>
					</fieldset>
				</section>
				{renderImages()}
			</main>
		</div>
	);
};

export const argTypes = {
	deprecatedElements: {
		table: {
			category: "Deprecated",
		},
	},
	deprecatedAttributes: {
		table: {
			category: "Deprecated",
		},
	},
	imagesSrc: {
		table: {
			category: "Images",
		},
	},
	imagesAlt: {
		table: {
			category: "Images",
		},
	},
	emptyHref: {
		table: {
			category: "Links",
		},
	},
	fieldsetLegend: {
		table: {
			category: "Forms",
		},
	},
	colorBlindness: {
		control: {
			type: "select",
			options: [
				"protanopia",
				"protanomaly",
				"deuteranopia",
				"deutranomaly",
				"tritanopia",
				"tritanomaly",
				"achromatopsia",
				"achromatomaly",
				"blur",
			],
		},
		table: {
			category: "Emulate",
		},
	},
	noMouse: {
		table: {
			category: "Emulate",
		},
	},
	reducedMotion: {
		table: {
			category: "Emulate",
		},
	},
	largeFont: {
		table: {
			category: "Emulate",
		},
	},
	lang: {
		table: {
			category: "Internationalization",
		},
	},
	dir: {
		table: {
			category: "Internationalization",
		},
	},
	tableHeader: {
		table: {
			category: "Table",
		},
	},
	tableNested: {
		table: {
			category: "Table",
		},
	},
	tableSingleRow: {
		table: {
			category: "Table",
		},
	},
	tableDeprecatedAttributes: {
		table: {
			category: "Table",
		},
	},
	nestedButtons: {
		table: {
			category: "Links",
		},
	},
};

# Accessibility Audits

<Subtitle>Subtitle here</Subtitle>

## Usage

text here

<Canvas>
	<Story name="Audit" args={defaultProps} argTypes={argTypes}>
		{(args) => <AuditInPage {...args} />}
	</Story>
</Canvas>

### Props

<ArgsTable story="Audit" />
